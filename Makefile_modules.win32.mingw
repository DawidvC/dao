COPY = copy /Y

C_TARGETS = DaoFormat DaoCGI DaoInode DaoNetwork DaoJSON
CLANG_TARGETS = DaoCxxInliner

make_all = for %%x in ($(1)) do \
           	if not exist %%x.dll ( \
           		$(MAKE) -C modules\%%x -f Makefile.win32.mingw & \
           		$(COPY) modules\%%x\%%x.dll %%x.dll )

all:
	$(call make_all,$(C_TARGETS))

clang:
	$(call make_all,$(CLANG_TARGETS))

clean:
	del /S /Q modules\*.o modules\*.dll
