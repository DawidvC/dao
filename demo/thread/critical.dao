

count = 0;
mt.run( 10, 4 )::{
	mt.critical::{
		io.writeln( 'in critical section' );
		for( i = 1 : 100000 ) count += 1;
	}
}
io.writeln( count );

count = 0;
mutex = mt.mutex();

mt.run( 10, 4 )::{
	mutex.protect::{
		io.writeln( 'in protected section' );
		for( i = 1 : 100000 ) count += 1;
	}
}
io.writeln( count );
